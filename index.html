<html>
  <head>
    <title>Colored</title>
    <meta name="description" content="Simple colored page">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Overpass+Mono:300" rel="stylesheet">

    <style>
      body {
        margin: 0;
        display: flex;
        flex-direction: column;
      }
      body * {
        font-family: 'Overpass Mono', monospace;
      }
      main {
        flex: 1 0 auto;
        display: flex;
        justify-content: center;
      }
      .content {
        margin: auto;
        text-align: center;
      }
      .color {
        text-align: center;
        padding: 0;
        border: none;
        width: 40%;
      }
      .color:focus {
        outline: none;
      }
      @media only screen and (min-width: 1100px){
        .color {
          font-size: 7rem;
        }
      }
      @media only screen and (max-width: 1100px){
        .color {
          font-size: 5rem;
        }
      }
      @media only screen and (max-width: 800px){
        .color {
          font-size: 3rem;
        }
      }
      @media only screen and (max-width: 400px){
        .color {
          font-size: 1.4rem;
        }
      }
      footer {
        padding: 10px;
        z-index: 100;
        background: rgba(0, 0, 0, 0.25);
      }
      a {
        text-decoration: none;
        color: white !important;
      }
      #shareLink {
        position: absolute;
      }
    </style>
  </head>
  <body>
    <main>
      <div class="content">
        <input id="colorCode" type="text" class="color" />
      </div>
    </main>
    <footer>
      <a href="http://zaidhuda.com" target="_blank">zaidhuda.com</a>&nbsp;
      <a href="/" id="shareLink">colorlink</a>
    </footer>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src='./jqColorPicker.min.js'></script>
    <script>
      $(function() {
        function colorChangedCallback() {
          var color = $('#colorCode').val();
          parent.location.hash = color;
          $(document).attr("title", color);
          $('body').css("background-color", color);
          $('#shareLink').prop('href', color);
        }

        function randomColor() {
          var hex = Math.floor(Math.random()*16777215).toString(16).toUpperCase();
          while(hex.length < 6) hex = '0' + hex;
          return '#' + hex;
        }

        function intialize() {
          var defaultColor = parent.location.hash || randomColor();
          $('#colorCode').val(defaultColor);
          colorChangedCallback();

          $picker = $('.color').colorPicker({
            color: $('#colorCode').val(),
            opacity: false,
            renderCallback: function() {
              colorChangedCallback();
            },
            positionCallback: function($elm) {
              console.log($elm.offset())
              var x = $(window).width() / 2 - 70;
              var y = $elm.offset().top + $elm.height();
              return {top: y, left: x}; // positions colorPicker before appearing
            }
          });
        }

        intialize();
      })
    </script>
  </body>
</html>